<!DOCTYPE html>
<html lang="en">
<style>
    #fwd_l, #fwd_r, #bwd_l, #bwd_r  {
    width: 20vw;
    height: 20vw;
    margin: 4vw;

    background: orange;
    color: #fff;
    font-size: 24px;
    font-weight: bold;
    font-family: Arial, sans-serif;
    text-align: center;
}

.wrapper  {
    float: left;
}

</style>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
    <meta charset="UTF-8">
    <title>Beer2D2 Control</title>
</head>
<body>
    <div class="wrapper">
        <div id="fwd_l"></div>
        <div id="bwd_l"></div>
    </div>
    <div class="wrapper">
        <div id="fwd_r"></div>
        <div id="bwd_r"></div>
    </div>
</body>
</html>


<script>
var fwd_l_timeout, fwd_l = $('#fwd_l');
var fwd_r_timeout, fwd_r = $('#fwd_r');

var bwd_l_timeout, bwd_l = $('#bwd_l');
var bwd_r_timeout, bwd_r = $('#bwd_r');
var count = 0;

var startEventType = 'mousedown',
    endEventType   = 'mouseup';

if (Modernizr.touch === true) {
    startEventType = 'touchstart';
    endEventType   = 'touchend';
}

fwd_l.on(startEventType, function(){
    fwd_l_timeout = setInterval(function(){
        fwd_l.css('background-color', '#00ff00');
        $.ajax({
            type: "POST",
            url: "/direct?motor=left&command=forwards",
        });
    }, 500);
    return false;
});

fwd_r.on(startEventType, function(){
    fwd_r_timeout = setInterval(function(){
        fwd_r.css('background-color', '#00ff00');
        $.ajax({
            type: "POST",
            url: "/direct?motor=right&command=forwards",
        });
    }, 500);
    return false;
});

bwd_l.on(startEventType, function(){
    bwd_l_timeout = setInterval(function(){
        bwd_l.css('background-color', '#00ff00');
        $.ajax({
            type: "POST",
            url: "/direct?motor=left&command=backwards",
        });
    }, 500);
    return false;
});

bwd_r.on(startEventType, function(){
    bwd_r_timeout = setInterval(function(){
        bwd_r.css('background-color', '#00ff00');
        $.ajax({
            type: "POST",
            url: "/direct?motor=right&command=backwards",
        });
    }, 500);
    return false;
});

fwd_l.on(endEventType, function(){
    clearInterval(fwd_l_timeout);
    fwd_l.css('background-color', 'orange');
    $.ajax({
            type: "POST",
            url: "/direct?motor=left&command=stop",
        });
    return false;
});

fwd_r.on(endEventType, function(){
    clearInterval(fwd_r_timeout);
    fwd_r.css('background-color', 'orange');
    $.ajax({
            type: "POST",
            url: "/direct?motor=right&command=stop",
        });
    return false;
});


bwd_l.on(endEventType, function(){
    clearInterval(bwd_l_timeout);
    bwd_l.css('background-color', 'orange');
    $.ajax({
            type: "POST",
            url: "/direct?motor=left&command=stop",
        });
    return false;
});

bwd_r.on(endEventType, function(){
    clearInterval(bwd_r_timeout);
    bwd_r.css('background-color', 'orange');
    $.ajax({
            type: "POST",
            url: "/direct?motor=right&command=stop",
        });
    return false;
});
</script>